Codeplay GraphQL with Asp.Net Core 5 
Awase Khirni Syed awasekhirni@gmail.com awase008@gmail.com 

1 dotnet new web -n FourGQLDemo
2 cd SecondGQLDemo 
  a.donet new graphql --force
3. dotnet add package HotChocolate.AspNetCore 
4. dotnet add package HotChocolate.Data
5. dotnet add package HotChocolate.Data.EntityFramework
6. dotnet add package Microsoft.EntityFrameworkCore 
7. dotnet add package Microsoft.EntityFrameworkCore.Design 
8. dotnet add package Microsoft.EntityFrameworkCore.Tools 
9. dotnet add package Microsoft.EntityFrameworkCore.SqlServer 
10.dotnet add package GraphQL.Server.Ui.Voyager 


register connection strings in appsettings.json 
"ConnectionStrings": {
    "DefaultConnection": "Server=(LocalDB)\\MSSQLLocalDB;Database=fourgqldb;Trusted_Connection=True;MultipleActiveResultSets=true"
  }
  
  startup.cs
  services.AddPooledDbContextFactory<ApplicationDbContext>(opt => opt.UseSqlServer(Configuration.GetConnectionString("DefaultConnection")));

dotnet ef migrations add InitialCreate --context AppicationDbContext 
dotnet ef migrations add InitialCreate --context BlogContext --output-dir Migrations/SqlServerMigrations
dotnet ef migrations add InitialCreate --context SqliteBlogContext --output-dir Migrations/SqliteMigrations

dotnet ef migrations add MyMigration --project ../SqlServerMigrations -- --provider SqlServer
dotnet ef migrations add MyMigration --project ../SqliteMigrations -- --provider Sqlite


dotnet ef database update 

dotnet build 
dotnet run 

query{
  employeeById(id: 5){
    name
    email
  }
}

query{
  allDepartmentsWithEmployee{
    name
    employees{
      email
      name
    }
  }
}

query{
  allEmployeesOnly{
    departmentId
    employeeId
  }
}

mutation{
  createEmployeeWithDepartment(name: "newemp", age: 30,
  email: "newemp@gmail.com", departmentName: "Mechanical Engr"){
    departmentId
    name
    department{
      departmentId
      name     
    }
  }
}

subscription{
  onEmployeeGet{
    name
    departmentId
    department{
      name    
    }
  }
}
